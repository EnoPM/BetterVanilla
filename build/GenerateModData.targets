<?xml version="1.0" encoding="utf-8"?>
<Project>

    <PropertyGroup>
        <!-- Chemin du fichier généré -->
        <GeneratedVersionFile>$(IntermediateOutputPath)ModData.g.cs</GeneratedVersionFile>
    </PropertyGroup>

    <Target Name="GenerateModDataClass" BeforeTargets="CoreCompile">
        <PropertyGroup>
            <GeneratedVersionContent><![CDATA[// <auto-generated/>
namespace $(RootNamespace)%3B

internal static class ModData
{
    public const string Guid = "$(AssemblyGuid)"%3B
    public const string Name = "$(AssemblyName)"%3B
    public const string Version = "$(Version)"%3B
}
]]></GeneratedVersionContent>
        </PropertyGroup>

        <WriteLinesToFile File="$(GeneratedVersionFile)"
                          Lines="$(GeneratedVersionContent)"
                          Overwrite="true"
                          WriteOnlyWhenDifferent="true"/>

        <ItemGroup>
            <!-- Remove first to avoid duplicates, then add -->
            <Compile Remove="$(GeneratedVersionFile)"/>
            <Compile Include="$(GeneratedVersionFile)"/>
        </ItemGroup>
    </Target>

</Project>