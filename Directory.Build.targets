<Project>

    <PropertyGroup>
        <!-- Chemin du fichier généré -->
        <GeneratedVersionFile>$(IntermediateOutputPath)AssemblyVersion.g.cs</GeneratedVersionFile>
    </PropertyGroup>

    <!-- Génération automatique de la classe AssemblyVersion -->
    <Target Name="GenerateVersionClass" BeforeTargets="CoreCompile" Condition="'$(Version)' != ''">
        <PropertyGroup>
            <GeneratedVersionContent><![CDATA[// <auto-generated/>
namespace $(RootNamespace)%3B

internal static class AssemblyVersion
{
    public const string Version = "$(Version)"%3B
}
]]></GeneratedVersionContent>
        </PropertyGroup>

        <WriteLinesToFile File="$(GeneratedVersionFile)"
                          Lines="$(GeneratedVersionContent)"
                          Overwrite="true"
                          WriteOnlyWhenDifferent="true" />

        <ItemGroup>
            <Compile Include="$(GeneratedVersionFile)" />
        </ItemGroup>
    </Target>

</Project>
